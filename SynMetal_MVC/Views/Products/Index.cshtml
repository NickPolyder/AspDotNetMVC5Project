@model IEnumerable<SynMetal_MVC.Models.Product>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
@if (User.IsInRole("Administrator") || User.IsInRole("Moderator"))
{
    @Html.ActionLink("Create New Product", "Create") @:|
    @Html.ActionLink("Manage Product Categories", "Index", "ProductCategories",null,null)
   
}
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Photo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Category)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th></th>
    </tr>
    @if (Model != null)
    {
foreach (var item in Model)
{
    <tr>
        <td>
         @*   @Html.DisplayFor(modelItem => item.Photo)*@
            @if(item.Photo != null)
            {
           
                    <a href="@Url.Content(item.Photo.FilePath)">
                        <img class="img-responsive media-object" src="@Url.Content(item.Photo.FilePath)" alt="@item.Photo.Name" data-photo="true"/>
                    </a>
                
            }
</td>
        <td>
                @item.Category.Name
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.ActionLink("Details", "Details", new { id = item.ProductId }) 
          @if(User.IsInRole("Administrator") || User.IsInRole("Moderator"))
          {
              @:|
            @Html.ActionLink("Edit", "Edit", new { id = item.ProductId }) @:|
            @Html.ActionLink("Delete", "Delete", new { id = item.ProductId })
          }
        </td>
    </tr>
}
    }
</table>

@section Scripts {
    @* @Scripts.Render("~/bundles/jqueryval") *@
   
     @Scripts.Render("~/bundles/clientFunc")
}
